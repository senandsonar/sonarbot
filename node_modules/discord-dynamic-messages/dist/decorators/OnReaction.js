"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const manageMetadata_1 = require("../manageMetadata");
const defaultReactionConfig = () => ({
    hidden: false,
    triggerRender: true,
    removeWhenDone: true,
    ignoreBots: true,
    ignoreHumans: false,
    doRetroactiveCallback: true,
});
exports.OnReaction = (emoji, config = {}) => (target, propertyKey, descriptor) => {
    manageMetadata_1.metadata.update(target, (allMetadata) => {
        // Add the reaction handler to the instance meta data
        allMetadata.reactionHandlers[emoji] = {
            registrationOrder: allMetadata.numberOfRegisteredReactionHandlers,
            handlerKey: propertyKey,
            config: Object.assign(Object.assign({}, defaultReactionConfig()), config),
        };
        allMetadata.numberOfRegisteredReactionHandlers += 1;
        return allMetadata;
    });
};
