!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).evt=t()}}((function(){return function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,(function(t){return o(e[a][1][t]||t)}),l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};r.__esModule=!0,r.Ctx=void 0;var i=t("minimal-polyfills/Set"),a=t("minimal-polyfills/WeakMap"),s=t("../tools/typeSafety/assert"),u=t("../tools/typeSafety/typeGuard"),c=t("./LazyEvt"),l=t("./importProxy"),f=t("../tools/typeSafety/defineAccessors"),p=t("../tools/typeSafety/overwriteReadonlyProp"),h=function(){function t(){this.lazyEvtAttach=new c.LazyEvt,this.lazyEvtDetach=new c.LazyEvt,this.lazyEvtDoneOrAborted=new c.LazyEvt,this.handlers=new i.Polyfill,this.evtByHandler=new a.Polyfill}return t.prototype.onDoneOrAborted=function(t){this.lazyEvtDoneOrAborted.post(t)},t.prototype.waitFor=function(t){var e=this;return this.evtDoneOrAborted.waitFor(t).then((function(t){if("ABORTED"===t.type)throw t.error;return t.result}),(function(t){throw e.abort(t),t}))},t.prototype.abort=function(t){return this.__done(t)},t.prototype.done=function(t){return this.__done(void 0,t)},t.prototype.__done=function(t,e){var r,i,a=[];try{for(var s=o(this.handlers.values()),u=s.next();!u.done;u=s.next()){var c=u.value,l=this.evtByHandler.get(c);c.detach()&&a.push({handler:c,evt:l})}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return this.onDoneOrAborted(n(n({},t?{type:"ABORTED",error:t}:{type:"DONE",result:e}),{handlers:a})),a},t.prototype.getHandlers=function(){var t=this;return Array.from(this.handlers.values()).map((function(e){return{handler:e,evt:t.evtByHandler.get(e)}}))},t.prototype.zz__addHandler=function(t,e){s.assert(t.ctx===this),s.assert(u.typeGuard(t)),this.handlers.add(t),this.evtByHandler.set(t,e),this.lazyEvtAttach.post({handler:t,evt:e})},t.prototype.zz__removeHandler=function(t){s.assert(t.ctx===this),s.assert(u.typeGuard(t)),this.lazyEvtDetach.post({handler:t,evt:this.evtByHandler.get(t)}),this.handlers.delete(t)},t.__1=(f.defineAccessors(t.prototype,"evtDoneOrAborted",{get:function(){return this.lazyEvtDoneOrAborted.evt}}),f.defineAccessors(t.prototype,"evtAttach",{get:function(){return this.lazyEvtAttach.evt}}),void f.defineAccessors(t.prototype,"evtDetach",{get:function(){return this.lazyEvtDetach.evt}})),t}();r.Ctx=h;try{p.overwriteReadonlyProp(r.Ctx,"name","Ctx")}catch(t){}l.importProxy.Ctx=r.Ctx},{"../tools/typeSafety/assert":36,"../tools/typeSafety/defineAccessors":37,"../tools/typeSafety/overwriteReadonlyProp":43,"../tools/typeSafety/typeGuard":44,"./LazyEvt":14,"./importProxy":17,"minimal-polyfills/Set":48,"minimal-polyfills/WeakMap":49}],2:[function(t,e,r){"use strict";r.__esModule=!0,r.asNonPostable=void 0,r.asNonPostable=function(t){return t}},{}],3:[function(t,e,r){"use strict";r.__esModule=!0,r.asPostable=void 0,r.asPostable=function(t){return t}},{}],4:[function(t,e,r){"use strict";r.__esModule=!0,r.create=void 0;var n=t("./importProxy");r.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?new n.importProxy.Evt:new n.importProxy.StatefulEvt(t[0])}},{"./importProxy":17}],5:[function(t,e,r){"use strict";r.__esModule=!0,r.factorize=void 0,r.factorize=function(t){return t}},{}],6:[function(t,e,r){"use strict";r.__esModule=!0,r.from=void 0;var n=t("../tools/typeSafety/id"),o=t("../tools/typeSafety/assert"),i=t("../tools/typeSafety/typeGuard"),a=t("./types/EventTargetLike"),s=t("./Evt.merge"),u=t("./importProxy");function c(t,e,r,i){if("then"in e){var l=new u.importProxy.Evt,f=(h=(p=function(){return null==t?void 0:t.evtDoneOrAborted.postCount})(),function(){return h!==p()});return e.then((function(t){f()||l.post(t)})),l}var p,h,d;if("length"in e)return s.mergeImpl(t,Array.from(e).map((function(e){return c(t,e,r,i)})));if(a.EventTargetLike.NodeStyleEventEmitter.match(e))d={on:function(t,r){return e.addListener(r,t)},off:function(t,r){return e.removeListener(r,t)}};else if(a.EventTargetLike.JQueryStyleEventEmitter.match(e))d={on:function(t,r){return e.on(r,t)},off:function(t,r){return e.off(r,t)}};else if(a.EventTargetLike.HasEventTargetAddRemove.match(e))d={on:function(t,r,n){return e.addEventListener(r,t,n)},off:function(t,r,n){return e.removeEventListener(r,t,n)}};else if(a.EventTargetLike.RxJSSubject.match(e)){var y;d={on:function(t){return y=e.subscribe((function(e){return t(e)}))},off:function(){return y.unsubscribe()}}}else n.id(e),o.assert(!1);var v=new u.importProxy.Evt,m=function(t){return v.post(t)};return null==t||t.evtDoneOrAborted.attachOnce((function(){return d.off(m,r,i)})),d.on(m,r,i),v}r.from=function(t,e,r,n){return"evtDoneOrAborted"in t?(o.assert(i.typeGuard(e)&&i.typeGuard(r)&&i.typeGuard(n)),c(t,e,r,n)):(o.assert(i.typeGuard(e)&&i.typeGuard(r)),c(void 0,t,e,r))}},{"../tools/typeSafety/assert":36,"../tools/typeSafety/id":39,"../tools/typeSafety/typeGuard":44,"./Evt.merge":10,"./importProxy":17,"./types/EventTargetLike":19}],7:[function(t,e,r){"use strict";r.__esModule=!0,r.getCtxFactory=void 0;var n=t("minimal-polyfills/WeakMap"),o=t("./importProxy");r.getCtxFactory=function(){var t=new n.Polyfill;return function(e){var r=t.get(e);return void 0===r&&(r=new o.importProxy.Ctx,t.set(e,r)),r}}},{"./importProxy":17,"minimal-polyfills/WeakMap":49}],8:[function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};r.__esModule=!0,r.Evt=void 0,t("minimal-polyfills/Array.prototype.find");var s=t("./importProxy"),u=t("./Evt.create"),c=t("./Evt.getCtx"),l=t("./Evt.factorize"),f=t("./Evt.merge"),p=t("./Evt.from"),h=t("./Evt.useEffect"),d=t("./Evt.asPostable"),y=t("./Evt.asNonPostable"),v=t("./Evt.parsePropsFromArgs"),m=t("./Evt.newCtx"),_=t("./LazyEvt"),g=t("../tools/typeSafety/defineAccessors"),E=t("./util/invokeOperator"),b=t("minimal-polyfills/Map"),O=t("minimal-polyfills/WeakMap"),x=t("run-exclusive"),P=t("./types/EvtError"),S=t("../tools/typeSafety/overwriteReadonlyProp"),w=t("../tools/typeSafety/typeGuard"),C=t("./util/encapsulateOpState"),M=t("../tools/Deferred"),k=t("./Evt.loosenType"),A=t("./types/interfaces/CtxLike"),j=t("../tools/safeSetTimeout"),z=t("./types/Operator"),T=function(){function t(){this.lazyEvtAttach=new _.LazyEvt,this.lazyEvtDetach=new _.LazyEvt,this.__maxHandlers=void 0,this.postCount=0,this.traceId=null,this.handlers=[],this.handlerTriggers=new b.Polyfill,this.__currentChronologyMark=0,this.asyncHandlerCount=0}return t.setDefaultMaxHandlers=function(t){this.__defaultMaxHandlers=isFinite(t)?t:0},t.prototype.toStateful=function(t,e){var r=A.CtxLike.match(t),n=r?void 0:t,o=e||(r?t:void 0),i=new s.importProxy.StatefulEvt(n),a=function(t){return i.post(t)};return o?this.attach(o,a):this.attach(a),i},t.prototype.setMaxHandlers=function(t){return this.__maxHandlers=isFinite(t)?t:0,this},t.prototype.enableTrace=function(t){var e=t.id,r=t.formatter,n=t.log;this.traceId=e,this.traceFormatter=r||function(t){try{return JSON.stringify(t,null,2)}catch(e){return""+t}},this.log=void 0===n?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.log.apply(console,i(t))}:!1===n?void 0:n},t.prototype.disableTrace=function(){return this.traceId=null,this},t.prototype.getChronologyMark=function(){return this.__currentChronologyMark++},t.prototype.detachHandler=function(t,e,r){var n=this.handlers.indexOf(t);return!(n<0)&&(w.typeGuard(t,!!t.ctx)&&t.ctx.zz__removeHandler(t),this.handlers.splice(n,1),t.async&&this.asyncHandlerCount--,this.handlerTriggers.delete(t),void 0!==e[0]&&(j.safeClearTimeout(e[0]),r(new P.EvtError.Detached)),this.lazyEvtDetach.post(t),!0)},t.prototype.triggerHandler=function(e,r,n,i){var a=e.callback,s=e.once;void 0!==r[0]&&(j.safeClearTimeout(r[0]),r[0]=void 0),t.doDetachIfNeeded(e,i,s);var u=o(i,1)[0];null==a||a.call(this,u),null==n||n(u)},t.prototype.addHandler=function(t,e){var r=this;z.Operator.fÎ».Stateful.match(t.op)&&this.statelessByStatefulOp.set(t.op,C.encapsulateOpState(t.op));var o=new M.Deferred,i=[void 0],a=n(n(n({},t),e),{detach:function(){return r.detachHandler(a,i,o.reject)},promise:o.pr});if("number"==typeof a.timeout&&(i[0]=j.safeSetTimeout((function(){i[0]=void 0,a.detach(),o.reject(new P.EvtError.Timeout(a.timeout))}),a.timeout)),this.handlerTriggers.set(a,(function(t){return r.triggerHandler(a,i,o.isPending?o.resolve:void 0,t)})),a.async&&this.asyncHandlerChronologyMark.set(a,this.getChronologyMark()),a.prepend){var s=void 0;for(s=0;s<this.handlers.length&&this.handlers[s].extract;s++);this.handlers.splice(s,0,a)}else this.handlers.push(a);return a.async&&this.asyncHandlerCount++,this.checkForPotentialMemoryLeak(),w.typeGuard(a,!!a.ctx)&&a.ctx.zz__addHandler(a,this),this.lazyEvtAttach.post(a),a},t.prototype.checkForPotentialMemoryLeak=function(){var e=void 0!==this.__maxHandlers?this.__maxHandlers:t.__defaultMaxHandlers;if(0!==e&&this.handlers.length%(e+1)==0){var r=["MaxHandlersExceededWarning: Possible Evt memory leak detected.",this.handlers.length+" handlers attached"+(this.traceId?' to "'+this.traceId+'"':"")+".\n","Use Evt.prototype.setMaxHandlers(n) to increase limit on a specific Evt.\n","Use Evt.setDefaultMaxHandlers(n) to change the default limit currently set to "+t.__defaultMaxHandlers+".\n"].join(""),o=new b.Polyfill;this.getHandlers().map((function(t){var e=t.ctx,r=t.async,o=t.once,i=t.prepend,a=t.extract,s=t.op,u=t.callback;return n(n({hasCtx:!!e,once:o,prepend:i,extract:a,isWaitFor:r},s===v.matchAll?{}:{op:s.toString()}),u?{callback:u.toString()}:{})})).map((function(t){return"{\n"+Object.keys(t).map((function(e){return"  "+e+": "+t[e]})).join(",\n")+"\n}"})).forEach((function(t){return o.set(t,(o.has(t)?o.get(t):0)+1)})),r+="\n"+Array.from(o.keys()).map((function(t){return o.get(t)+" handler"+(1===o.get(t)?"":"s")+" like:\n"+t})).join("\n")+"\n",null===this.traceId&&(r+="\n"+["To validate the identify of the Evt instance that is triggering this warning you can call",'Evt.prototype.enableTrace({ "id": "My evt id", "log": false }) on the Evt that you suspect.\n'].join(" "));try{console.warn(r)}catch(t){}}},t.prototype.getStatelessOp=function(t){return z.Operator.fÎ».Stateful.match(t)?this.statelessByStatefulOp.get(t):t},t.prototype.trace=function(t){var e,r=this;if(null!==this.traceId){var n="("+this.traceId+") ";if(!!this.handlers.find((function(e){var n=e.extract,o=e.op;return n&&!!r.getStatelessOp(o)(t)})))n+="extracted ";else{var o=this.handlers.filter((function(e){var n=e.extract,o=e.op;return!n&&!!r.getStatelessOp(o)(t)})).length;n+=o+" handler"+(o>1?"s":"")+", "}null===(e=this.log)||void 0===e||e.call(this,n+this.traceFormatter(t))}},t.prototype.postSync=function(e){var r,n;try{for(var o=a(i(this.handlers)),s=o.next();!s.done;s=o.next()){var u=s.value,c=u.async,l=u.op,f=u.extract;if(!c){var p=E.invokeOperator(this.getStatelessOp(l),e,!0);if(z.Operator.fÎ».Result.NotMatched.match(p))t.doDetachIfNeeded(u,p);else{var h=this.handlerTriggers.get(u);if(h&&(h(p),f))return!0}}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t.prototype.postAsyncFactory=function(){var e=this;return x.buildMethodCb((function(r,n,o){var s,u;if(0!==e.asyncHandlerCount){var c,l=[];Promise.resolve().then((function(){return c=e.getChronologyMark()}));var f=function(o){if(!o.async)return"continue";var i=E.invokeOperator(e.getStatelessOp(o.op),r,!0);if(z.Operator.fÎ».Result.NotMatched.match(i))return t.doDetachIfNeeded(o,i),"continue";var a=e.handlerTriggers.get(o);return a&&function(){var t=e.asyncHandlerChronologyMark.get(o);if(n>t)return!0;var r=e.asyncHandlerChronologyExceptionRange.get(o);return void 0!==r&&r.lowerMark<n&&n<r.upperMark&&t>r.upperMark}()?(l.push(new Promise((function(t){return o.promise.then((function(){return t()})).catch((function(){return t()}))}))),void a(i)):"continue"};try{for(var p=a(i(e.handlers)),h=p.next();!h.done;h=p.next()){f(h.value)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}if(0!==l.length){var d=i(e.handlers);Promise.all(l).then((function(){var t,r;try{for(var i=a(e.handlers),s=i.next();!s.done;s=i.next()){var u=s.value;u.async&&(d.indexOf(u)>=0||e.asyncHandlerChronologyExceptionRange.set(u,{lowerMark:n,upperMark:c}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}o()}))}else o()}else o()}))},t.prototype.isHandled=function(t){var e=this;return!!this.getHandlers().find((function(r){var n=r.op;return!!e.getStatelessOp(n)(t)}))},t.prototype.getHandlers=function(){return i(this.handlers)},t.prototype.detach=function(t){var e,r,n=[];try{for(var o=a(this.getHandlers()),i=o.next();!i.done;i=o.next()){var s=i.value;if(void 0===t||s.ctx===t)s.detach()&&n.push(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=new t;return this.addHandler(n(n({},v.parsePropsFromArgs(e,"pipe")),{callback:function(t){return o.post(t)}}),t.propsFormMethodNames.attach),o},t.prototype.waitFor=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.addHandler(v.parsePropsFromArgs(e,"waitFor"),t.propsFormMethodNames.waitFor).promise},t.prototype.$attach=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attach.apply(this,i(t))},t.prototype.attach=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attach")},t.prototype.$attachOnce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachOnce.apply(this,i(t))},t.prototype.attachOnce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachOnce")},t.prototype.$attachExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachExtract.apply(this,i(t))},t.prototype.attachExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachExtract")},t.prototype.$attachPrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachPrepend.apply(this,i(t))},t.prototype.attachPrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachPrepend")},t.prototype.$attachOncePrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachOncePrepend.apply(this,i(t))},t.prototype.attachOncePrepend=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachOncePrepend")},t.prototype.$attachOnceExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.attachOnceExtract.apply(this,i(t))},t.prototype.attachOnceExtract=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.__attachX(t,"attachOnceExtract")},t.prototype.__attachX=function(e,r){var n=v.parsePropsFromArgs(e,"attach*"),o=this.addHandler(n,t.propsFormMethodNames[r]);return void 0===n.timeout?this:o.promise},t.prototype.postAsyncOnceHandled=function(t){var e=this;if(this.isHandled(t))return this.post(t);var r=new M.Deferred;return this.evtAttach.attachOnce((function(r){var n=r.op;return!!E.invokeOperator(e.getStatelessOp(n),t)}),(function(){return Promise.resolve().then((function(){return r.resolve(e.post(t))}))})),r.pr},t.prototype.post=function(t){this.trace(t),S.overwriteReadonlyProp(this,"postCount",this.postCount+1);var e=this.getChronologyMark();if(this.postSync(t))return this.postCount;if(void 0===this.postAsync){if(0===this.asyncHandlerCount)return this.postCount;this.postAsync=this.postAsyncFactory()}return this.postAsync(t,e),this.postCount},t.create=u.create,t.newCtx=m.newCtx,t.merge=f.merge,t.from=p.from,t.useEffect=h.useEffect,t.getCtx=c.getCtxFactory(),t.loosenType=k.loosenType,t.factorize=l.factorize,t.asPostable=d.asPostable,t.asNonPostable=y.asNonPostable,t.__defaultMaxHandlers=25,t.__1=(g.defineAccessors(t.prototype,"evtAttach",{get:function(){return this.lazyEvtAttach.evt}}),void g.defineAccessors(t.prototype,"evtDetach",{get:function(){return this.lazyEvtDetach.evt}})),t.__2=void Object.defineProperties(t.prototype,["__asyncHandlerChronologyMark","__asyncHandlerChronologyExceptionRange","__statelessByStatefulOp"].map((function(t){return[t.substr(2),{get:function(){return void 0===this[t]&&(this[t]=new O.Polyfill),this[t]}}]})).reduce((function(t,e){var r,i=o(e,2),a=i[0],s=i[1];return n(n({},t),((r={})[a]=s,r))}),{})),t.propsFormMethodNames={waitFor:{async:!0,extract:!1,once:!0,prepend:!1},attach:{async:!1,extract:!1,once:!1,prepend:!1},attachExtract:{async:!1,extract:!0,once:!1,prepend:!0},attachPrepend:{async:!1,extract:!1,once:!1,prepend:!0},attachOnce:{async:!1,extract:!1,once:!0,prepend:!1},attachOncePrepend:{async:!1,extract:!1,once:!0,prepend:!0},attachOnceExtract:{async:!1,extract:!0,once:!0,prepend:!0}},t}();!function(t){t.doDetachIfNeeded=function(t,e,r){var n=z.Operator.fÎ».Result.getDetachArg(e);if("boolean"!=typeof n){var i=o(n,3),a=i[0],s=i[1],u=i[2];s?a.abort(s):a.done(u)}else(n||r)&&t.detach()}}(T||(T={})),r.Evt=T;try{S.overwriteReadonlyProp(r.Evt,"name","Evt")}catch(t){}s.importProxy.Evt=r.Evt},{"../tools/Deferred":34,"../tools/safeSetTimeout":35,"../tools/typeSafety/defineAccessors":37,"../tools/typeSafety/overwriteReadonlyProp":43,"../tools/typeSafety/typeGuard":44,"./Evt.asNonPostable":2,"./Evt.asPostable":3,"./Evt.create":4,"./Evt.factorize":5,"./Evt.from":6,"./Evt.getCtx":7,"./Evt.loosenType":9,"./Evt.merge":10,"./Evt.newCtx":11,"./Evt.parsePropsFromArgs":12,"./Evt.useEffect":13,"./LazyEvt":14,"./importProxy":17,"./types/EvtError":20,"./types/Operator":21,"./types/interfaces/CtxLike":24,"./util/encapsulateOpState":28,"./util/invokeOperator":33,"minimal-polyfills/Array.prototype.find":45,"minimal-polyfills/Map":46,"minimal-polyfills/WeakMap":49,"run-exclusive":50}],9:[function(t,e,r){"use strict";r.__esModule=!0,r.loosenType=void 0,r.loosenType=function(t){return t}},{}],10:[function(t,e,r){"use strict";r.__esModule=!0,r.merge=r.mergeImpl=void 0;var n=t("./importProxy");function o(t,e){var r=new n.importProxy.Evt,o=function(t){return r.post(t)};return e.forEach((function(e){void 0===t?e.attach(o):e.attach(t,o)})),r}r.mergeImpl=o,r.merge=function(t,e){return"length"in t?o(void 0,t):o(t,e)}},{"./importProxy":17}],11:[function(t,e,r){"use strict";r.__esModule=!0,r.newCtx=void 0;var n=t("./importProxy");r.newCtx=function(){return new n.importProxy.Ctx}},{"./importProxy":17}],12:[function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t};r.__esModule=!0,r.parsePropsFromArgs=r.matchAll=void 0;var a=t("../tools/typeSafety/id"),s=t("./util/compose"),u=t("../tools/typeSafety/typeGuard");function c(){return!0}r.matchAll=c;var l=function(t){return void 0!==t&&u.typeGuard(t)&&("function"==typeof t||"function"==typeof t[0])},f={op:c,ctx:void 0,timeout:void 0,callback:void 0};r.parsePropsFromArgs=function t(e,r){switch(u.typeGuard(f),r){case"pipe":var c=function(t){return 0===t.length?{}:{op:1===t.length?t[0]:s.compose.apply(void 0,i(t))}};if(l(e[0]))return a.id(n(n({},f),c(e)));var p=o(e),h=p[0],d=p.slice(1);return a.id(n(n(n({},f),void 0!==h?{ctx:h}:{}),c(d)));case"waitFor":return t(i(e.filter((function(t,r){return!(r===e.length-1&&void 0===t)})),[f.callback]),"attach*");case"attach*":switch(e.length){case 4:var y=o(e,4),v=y[0],m=y[1],_=y[2],g=y[3];return a.id(n(n({},f),{op:v,ctx:m,timeout:_,callback:g}));case 3:var E=o(e,3);v=E[0],m=E[1],_=E[2];if("number"==typeof m){var b=m,O=_;return l(v)?a.id(n(n({},f),{timeout:b,callback:O,op:v})):a.id(n(n({},f),{timeout:b,callback:O,ctx:v}))}return a.id(n(n({},f),{op:v,ctx:m,callback:_}));case 2:var x=o(e,2);v=x[0],m=x[1];if("number"==typeof v)return a.id(n(n({},f),{timeout:v,callback:m}));O=m;return l(v)?a.id(n(n({},f),{callback:O,op:v})):a.id(n(n({},f),{callback:O,ctx:v}));case 1:var P=o(e,1)[0];return a.id(n(n({},f),{callback:P}));case 0:return a.id(n({},f))}}}},{"../tools/typeSafety/id":39,"../tools/typeSafety/typeGuard":44,"./util/compose":27}],13:[function(t,e,r){"use strict";r.__esModule=!0,r.useEffect=void 0,r.useEffect=function(t,e,r){var n=0;("state"in e?e.evtChange:e).attach((function(e){return t(e,{isFirst:!1,data:e},n++)})),t("state"in e?e.state:null==r?void 0:r[0],{isFirst:!0},n++)}},{}],14:[function(t,e,r){"use strict";r.__esModule=!0,r.LazyEvt=void 0;var n=t("../tools/typeSafety/overwriteReadonlyProp"),o=t("./importProxy"),i=t("../tools/typeSafety/defineAccessors"),a=function(){function t(){this.initialPostCount=0}return t.prototype.post=function(t){return void 0===this.__evt?++this.initialPostCount:this.__evt.post(t)},t.__1=void i.defineAccessors(t.prototype,"evt",{get:function(){return void 0===this.__evt&&(this.__evt=new o.importProxy.Evt,n.overwriteReadonlyProp(this.__evt,"postCount",this.initialPostCount)),this.__evt}}),t}();r.LazyEvt=a},{"../tools/typeSafety/defineAccessors":37,"../tools/typeSafety/overwriteReadonlyProp":43,"./importProxy":17}],15:[function(t,e,r){"use strict";r.__esModule=!0,r.LazyStatefulEvt=void 0;var n=t("../tools/typeSafety/overwriteReadonlyProp"),o=t("./importProxy"),i=t("../tools/typeSafety/defineAccessors"),a=function(){function t(t){this.initialPostCount=0,this.initialState=t}return t.prototype.post=function(t){return void 0===this.__evt?(this.initialState=t,++this.initialPostCount):this.__evt.post(t)},t.__1=void i.defineAccessors(t.prototype,"evt",{get:function(){return void 0===this.__evt&&(this.__evt=new o.importProxy.StatefulEvt(this.initialState),delete this.initialState,n.overwriteReadonlyProp(this.__evt,"postCount",this.initialPostCount)),this.__evt}}),t}();r.LazyStatefulEvt=a},{"../tools/typeSafety/defineAccessors":37,"../tools/typeSafety/overwriteReadonlyProp":43,"./importProxy":17}],16:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};r.__esModule=!0,r.StatefulEvt=void 0,t("minimal-polyfills/Object.is");var s=t("../tools/typeSafety/defineAccessors"),u=t("./LazyEvt"),c=t("./LazyStatefulEvt"),l=t("./importProxy"),f=t("./util/invokeOperator"),p=t("./types/Operator"),h=t("./Evt.parsePropsFromArgs"),d=function(t){function e(e){var r=t.call(this)||this;return r.lazyEvtDiff=new u.LazyEvt,r.lazyEvtChangeDiff=new u.LazyEvt,r.__state=e,r.lazyEvtChange=new c.LazyStatefulEvt(r.__state),r}return o(e,t),e.prototype.post=function(t){return this.__post(t,!1)},e.prototype.postForceChange=function(t){return this.__post(t?t[0]:this.state,!0)},e.prototype.__post=function(e,r){var n=this.state;this.__state=e;var o={prevState:n,newState:this.state};return this.lazyEvtDiff.post(o),!r&&Object.is(n,this.state)||(this.lazyEvtChange.post(this.state),this.lazyEvtChangeDiff.post(o)),t.prototype.post.call(this,e)},e.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=t.prototype.pipe.apply(this,a(e)),o=f.invokeOperator(this.getStatelessOp(h.parsePropsFromArgs(e,"pipe").op),this.state);if(p.Operator.fÎ».Result.NotMatched.match(o))throw new Error(["Cannot pipe StatefulEvt because the operator does not match","it's current state.","Use evt.toStateless([ctx]).pipe(op).toStatic(initialState)","to be sure the StatefulEvt is correctly initialized"].join(" "));return n.toStateful(o[0])},e.prototype.toStateless=function(e){return e?t.prototype.pipe.call(this,e):t.prototype.pipe.call(this)},e.__4=(s.defineAccessors(e.prototype,"state",{get:function(){return this.__state},set:function(t){this.post(t)}}),s.defineAccessors(e.prototype,"evtDiff",{get:function(){return this.lazyEvtDiff.evt}}),s.defineAccessors(e.prototype,"evtChange",{get:function(){return this.lazyEvtChange.evt}}),void s.defineAccessors(e.prototype,"evtChangeDiff",{get:function(){return this.lazyEvtChangeDiff.evt}})),e}(t("./Evt").Evt);r.StatefulEvt=d,l.importProxy.StatefulEvt=r.StatefulEvt},{"../tools/typeSafety/defineAccessors":37,"./Evt":8,"./Evt.parsePropsFromArgs":12,"./LazyEvt":14,"./LazyStatefulEvt":15,"./importProxy":17,"./types/Operator":21,"./util/invokeOperator":33,"minimal-polyfills/Object.is":47}],17:[function(t,e,r){"use strict";r.__esModule=!0,r.importProxy=void 0,r.importProxy={}},{}],18:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};r.__esModule=!0,o(t("./types"),r),o(t("./util"),r);var i=t("./Ctx");n(r,i,"Ctx");var a=t("./Evt");n(r,a,"Evt");var s=t("./StatefulEvt");n(r,s,"StatefulEvt");var u=t("../tools/typeSafety/matchVoid");n(r,u,"matchVoid")},{"../tools/typeSafety/matchVoid":41,"./Ctx":1,"./Evt":8,"./StatefulEvt":16,"./types":23,"./util":32}],19:[function(t,e,r){"use strict";r.__esModule=!0,r.EventTargetLike=void 0;var n=t("../../tools/typeSafety");!function(t){!function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.subscribe}}(t.RxJSSubject||(t.RxJSSubject={})),function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}}(t.NodeStyleEventEmitter||(t.NodeStyleEventEmitter={})),function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.on&&"function"==typeof t.off}}(t.JQueryStyleEventEmitter||(t.JQueryStyleEventEmitter={})),function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}}(t.HasEventTargetAddRemove||(t.HasEventTargetAddRemove={}))}(r.EventTargetLike||(r.EventTargetLike={}))},{"../../tools/typeSafety":40}],20:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});r.__esModule=!0,r.EvtError=void 0,function(t){var e=function(t){function e(e){var r=this.constructor,n=t.call(this,"Evt timeout after "+e+"ms")||this;return n.timeout=e,Object.setPrototypeOf(n,r.prototype),n}return o(e,t),e}(Error);t.Timeout=e;var r=function(t){function e(){var e=this.constructor,r=t.call(this,"Evt handler detached")||this;return Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(Error);t.Detached=r}(r.EvtError||(r.EvtError={}))},{}],21:[function(t,e,r){"use strict";r.__esModule=!0,r.Operator=void 0;var n=t("../../tools/typeSafety");!function(t){!function(t){!function(t){t.match=function(t){return"function"!=typeof t}}(t.Stateful||(t.Stateful={})),function(t){var e,r,o;t.match=function(t){return r.match(t)||e.match(t)},t.getDetachArg=function(t){var e=r.match(t)?t[1]:t;return!!o.FromEvt.match(e)||!!o.WithCtxArg.match(e)&&[e.DETACH,e.err,e.res]},function(t){t.match=function(t){return null===t||o.match(t)}}(e=t.NotMatched||(t.NotMatched={})),function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&!("input"in t)&&(1===t.length||2===t.length&&(null===t[1]||o.match(t[1])))}}(r=t.Matched||(t.Matched={})),function(t){var e,r;!function(t){t.match=function(t){return"DETACH"===t}}(e=t.FromEvt||(t.FromEvt={})),function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&t.DETACH instanceof Object}}(r=t.WithCtxArg||(t.WithCtxArg={})),t.match=function(t){return e.match(t)||r.match(t)}}(o=t.Detach||(t.Detach={}))}(t.Result||(t.Result={}))}(t.fÎ»||(t.fÎ»={}))}(r.Operator||(r.Operator={}))},{"../../tools/typeSafety":40}],22:[function(t,e,r){"use strict";r.__esModule=!0},{}],23:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};r.__esModule=!0,r.dom=void 0,o(t("./helper"),r),o(t("./interfaces"),r);var i=t("./EventTargetLike");n(r,i,"EventTargetLike");var a=t("./EvtError");n(r,a,"EvtError");var s=t("./lib.dom");r.dom=s;var u=t("./Operator");n(r,u,"Operator")},{"./EventTargetLike":19,"./EvtError":20,"./Operator":21,"./helper":22,"./interfaces":25,"./lib.dom":26}],24:[function(t,e,r){"use strict";r.__esModule=!0,r.CtxLike=void 0;var n=t("../../../tools/typeSafety/typeGuard");!function(t){t.match=function(t){return n.typeGuard(t)&&t instanceof Object&&"function"==typeof t.done&&"function"==typeof t.abort&&"function"==typeof t.zz__addHandler&&"function"==typeof t.zz__removeHandler}}(r.CtxLike||(r.CtxLike={}))},{"../../../tools/typeSafety/typeGuard":44}],25:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]});r.__esModule=!0,n(r,t("./CtxLike"),"CtxLike")},{"./CtxLike":24}],26:[function(t,e,r){"use strict";r.__esModule=!0},{}],27:[function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t};r.__esModule=!0,r.compose=void 0;var i=t("./encapsulateOpState"),a=t("./invokeOperator"),s=t("../types/Operator"),u=t("../../tools/typeSafety/id"),c=t("../../tools/typeSafety/assert"),l=t("../../tools/typeSafety/typeGuard");function f(t,e){var r=s.Operator.fÎ».Stateful.match(t)?i.encapsulateOpState(t):u.id(t),o=s.Operator.fÎ».Stateful.match(e)?i.encapsulateOpState(e):u.id(e);return u.id((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=n(t,3),f=i[0],p=i[2],h=a.invokeOperator(r,f,p);if(s.Operator.fÎ».Result.NotMatched.match(h))return c.assert(l.typeGuard(h)),h;var d=h[1]?h[1]:null;c.assert(l.typeGuard(d));var y=n(h,1),v=y[0],m=a.invokeOperator(o,v,p);return s.Operator.fÎ».Result.NotMatched.match(m)?(c.assert(l.typeGuard(m)),null!==d?d:m):u.id([m[0],d||(m[1]?m[1]:null)])}))}r.compose=function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(1===e.length){var a=n(e,1),u=a[0];return s.Operator.fÎ».Stateful.match(u)?i.encapsulateOpState(u):u}var c=n(e),l=c[0],p=c[1],h=c.slice(2),d=f(l,p);return 0===h.length?d:t.apply(void 0,o([d],h))}},{"../../tools/typeSafety/assert":36,"../../tools/typeSafety/id":39,"../../tools/typeSafety/typeGuard":44,"../types/Operator":21,"./encapsulateOpState":28,"./invokeOperator":33}],28:[function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};r.__esModule=!0,r.encapsulateOpState=void 0;var o=t("../../tools/typeSafety/id"),i=t("../types/Operator");r.encapsulateOpState=function(t){var e=t[1];return o.id((function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=n(r,3),s=a[0],u=a[2],c=t[0](s,e,u);return u&&i.Operator.fÎ».Result.Matched.match(c)&&(e=c[0]),c}))}},{"../../tools/typeSafety/id":39,"../types/Operator":21}],29:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]});r.__esModule=!0,n(r,t("./throttleTime"),"throttleTime"),n(r,t("./to"),"to")},{"./throttleTime":30,"./to":31}],30:[function(t,e,r){"use strict";r.__esModule=!0,r.throttleTime=void 0;var n=t("../compose");r.throttleTime=function(t){return n.compose([function(e,r){var n=r.lastClick,o=Date.now();return o-n<t?null:[{data:e,lastClick:o}]},{lastClick:0,data:null}],(function(t){return[t.data]}))}},{"../compose":27}],31:[function(t,e,r){"use strict";r.__esModule=!0,r.to=void 0,r.to=function(t){return function(e){return e[0]!==t?null:[e[1]]}}},{}],32:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};r.__esModule=!0,o(t("./genericOperators"),r);var i=t("./compose");n(r,i,"compose");var a=t("./invokeOperator");n(r,a,"invokeOperator")},{"./compose":27,"./genericOperators":29,"./invokeOperator":33}],33:[function(t,e,r){"use strict";r.__esModule=!0,r.invokeOperator=void 0;var n=t("../types/Operator");r.invokeOperator=function(t,e,r){var o=t(e,void 0,r);return n.Operator.fÎ».Result.match(o)?o:o?[e]:null}},{"../types/Operator":21}],34:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});r.__esModule=!0,r.VoidDeferred=r.Deferred=void 0;var i=t("./typeSafety/overwriteReadonlyProp"),a=function(){var t,e,r=this;this.isPending=!0,this.pr=new Promise((function(n,o){t=function(t){i.overwriteReadonlyProp(r,"isPending",!1),n(t)},e=function(t){i.overwriteReadonlyProp(r,"isPending",!1),o(t)}})),this.resolve=t,this.reject=e};r.Deferred=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a);r.VoidDeferred=s},{"./typeSafety/overwriteReadonlyProp":43}],35:[function(t,e,r){"use strict";r.__esModule=!0,r.safeClearTimeout=r.safeSetTimeout=void 0,r.safeSetTimeout=function(t,e){return setTimeout(t,e)},r.safeClearTimeout=function(t){return clearTimeout(t)}},{}],36:[function(t,e,r){"use strict";r.__esModule=!0,r.assert=void 0,r.assert=function(t,e){if(!t)throw new Error(e)}},{}],37:[function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};r.__esModule=!0,r.defineAccessors=void 0,r.defineAccessors=function(t,e,r){var o=r.get,i=r.set;Object.defineProperty(t,e,n(n(n({},Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0}),void 0!==o?{get:function(){return o.call(this)}}:{}),void 0!==i?{set:function(t){i.call(this,t)}}:{}))}},{}],38:[function(t,e,r){"use strict";r.__esModule=!0,r.exclude=void 0,r.exclude=function(t){var e=t instanceof Object?function(e){return t.indexOf(e)<0}:function(e){return e!==t};return function(t){return e(t)}}},{}],39:[function(t,e,r){"use strict";r.__esModule=!0,r.id=void 0,r.id=function(t){return t}},{}],40:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]});r.__esModule=!0,n(r,t("./assert"),"assert"),n(r,t("./exclude"),"exclude"),n(r,t("./id"),"id"),n(r,t("./matchVoid"),"matchVoid"),n(r,t("./objectKeys"),"objectKeys"),n(r,t("./typeGuard"),"typeGuard")},{"./assert":36,"./exclude":38,"./id":39,"./matchVoid":41,"./objectKeys":42,"./typeGuard":44}],41:[function(t,e,r){"use strict";r.__esModule=!0,r.matchVoid=void 0,r.matchVoid=function(t){return void 0===t}},{}],42:[function(t,e,r){"use strict";r.__esModule=!0,r.objectKeys=void 0,r.objectKeys=function(t){return Object.keys(t)}},{}],43:[function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};r.__esModule=!0,r.overwriteReadonlyProp=void 0,r.overwriteReadonlyProp=function(t,e,r){try{t[e]=r}catch(t){}if(t[e]===r)return r;var o=void 0,i=Object.getOwnPropertyDescriptor(t,e)||{enumerable:!0,configurable:!0};if(i.get)throw new Error("Probably a wrong ides to overwrite "+e+" getter");try{Object.defineProperty(t,e,n(n({},i),{value:r}))}catch(t){o=t}if(t[e]!==r)throw o||new Error("Can't assign");return r}},{}],44:[function(t,e,r){"use strict";r.__esModule=!0,r.typeGuard=void 0,r.typeGuard=function(t,e){return void 0===e&&(e=!0),e}},{}],45:[function(t,e,r){"use strict";r.__esModule=!0,Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),r=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<r;){var i=e[o];if(t.call(n,i,o,e))return i;o++}},configurable:!0,writable:!0})},{}],46:[function(t,e,r){"use strict";r.__esModule=!0,r.Polyfill=r.LightMapImpl=void 0;var n=function(){function t(){this.record=[]}return t.prototype.has=function(t){return this.record.map((function(t){return t[0]})).indexOf(t)>=0},t.prototype.get=function(t){var e=this.record.filter((function(e){return e[0]===t}))[0];if(void 0!==e)return e[1]},t.prototype.set=function(t,e){var r=this.record.filter((function(e){return e[0]===t}))[0];return void 0===r?this.record.push([t,e]):r[1]=e,this},t.prototype.delete=function(t){var e=this.record.map((function(t){return t[0]})).indexOf(t);return!(e<0)&&(this.record.splice(e,1),!0)},t.prototype.keys=function(){return this.record.map((function(t){return t[0]}))},t}();r.LightMapImpl=n,r.Polyfill="undefined"!=typeof Map?Map:n},{}],47:[function(t,e,r){"use strict";r.__esModule=!0,Object.is||(Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e})},{}],48:[function(t,e,r){"use strict";r.__esModule=!0,r.Polyfill=r.LightSetImpl=void 0;var n=t("./Map"),o=function(){function t(t){if(this.map=new n.Polyfill,void 0!==t)for(var e=0,r=t;e<r.length;e++){var o=r[e];this.add(o)}}return t.prototype.has=function(t){return this.map.has(t)},t.prototype.add=function(t){return this.map.set(t,!0),this},t.prototype.values=function(){return this.map.keys()},t.prototype.delete=function(t){return this.map.delete(t)},t}();r.LightSetImpl=o,r.Polyfill="undefined"!=typeof Set?Set:o},{"./Map":46}],49:[function(t,e,r){"use strict";r.__esModule=!0,r.Polyfill=void 0;var n=t("./Map");r.Polyfill="undefined"!=typeof WeakMap?WeakMap:n.Polyfill},{"./Map":46}],50:[function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};r.__esModule=!0,r.buildMethodCb=r.buildCb=r.getPrComplete=r.isRunning=r.cancelAllQueuedCalls=r.getQueuedCallCount=r.buildMethod=r.build=r.createGroupRef=void 0;var o=t("minimal-polyfills/WeakMap"),i=function(){function t(){this.queuedCalls=[],this.isRunning=!1,this.prComplete=Promise.resolve()}return t.prototype.cancelAllQueuedCalls=function(){var t;return this.queuedCalls.splice(0,t=this.queuedCalls.length),t},t}(),a={},s=new o.Polyfill;function u(t,e){var r=s.get(t);r||(r=new o.Polyfill,s.set(t,r));var n=r.get(e);return n||(n=new i,r.set(e,n)),n}function c(){return new Array(0)}r.createGroupRef=c,r.build=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return p(!0,c(),t[0]);case 2:return p(!0,t[0],t[1])}},r.buildMethod=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return p(!1,c(),t[0]);case 2:return p(!1,t[0],t[1])}},r.getQueuedCallCount=function(t,e){var r=f(t,e);return r?r.queuedCalls.length:0},r.cancelAllQueuedCalls=function(t,e){var r=f(t,e);return r?r.cancelAllQueuedCalls():0},r.isRunning=function(t,e){var r=f(t,e);return!!r&&r.isRunning},r.getPrComplete=function(t,e){var r=f(t,e);return r?r.prComplete:Promise.resolve()};var l=new o.Polyfill;function f(t,e){void 0===e&&(e=a);var r=l.get(t);if(!r)throw Error("Not a run exclusiveFunction");var n=s.get(e);if(n)return n.get(r)}function p(t,e,r){var n,o=function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!t){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");n=u(this,e)}return new Promise((function(t,e){var a;n.prComplete=new Promise((function(t){return a=function(){return t()}}));var s=function(r){a(),n.isRunning=!1,n.queuedCalls.length&&n.queuedCalls.shift()(),"data"in r?t(r.data):e(r.reason)};(function t(){for(var e=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(n.isRunning)n.queuedCalls.push((function(){return t.apply(e,o)}));else{n.isRunning=!0;try{r.apply(this,o).then((function(t){return s({data:t})})).catch((function(t){return s({reason:t})}))}catch(t){s({reason:t})}}}).apply(o,i)}))};return t&&(n=u(a,e)),l.set(o,e),o}function h(t,e,r){var o,i=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(!t){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");o=u(this,e)}var c,l=void 0;a.length&&"function"==typeof a[a.length-1]&&(l=a.pop()),o.prComplete=new Promise((function(t){return c=function(){return t()}}));var f=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c(),o.isRunning=!1,o.queuedCalls.length&&o.queuedCalls.shift()(),l&&l.apply(i,t)};f.hasCallback=!!l,function t(){for(var e=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(o.isRunning)o.queuedCalls.push((function(){return t.apply(e,i)}));else{o.isRunning=!0;try{r.apply(this,n(i,[f]))}catch(t){throw t.message+=" ( This exception should not have been thrown, miss use of run-exclusive buildCb )",t}}}.apply(this,a)};return t&&(o=u(a,e)),l.set(i,e),i}r.buildCb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return h(!0,c(),t[0]);case 2:return h(!0,t[0],t[1])}},r.buildMethodCb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];switch(t.length){case 1:return h(!1,c(),t[0]);case 2:return h(!1,t[0],t[1])}}},{"minimal-polyfills/WeakMap":49}]},{},[18])(18)}));